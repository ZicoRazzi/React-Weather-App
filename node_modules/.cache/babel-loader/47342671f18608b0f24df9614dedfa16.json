{"ast":null,"code":"import _asyncToGenerator from\"/Users/zico/Documents/wheather app/weather-app-web-ZicoRazzi/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/zico/Documents/wheather app/weather-app-web-ZicoRazzi/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/zico/Documents/wheather app/weather-app-web-ZicoRazzi/node_modules/@babel/runtime/regenerator/index.js\";import CurrentWeatherStyles from\"./CurrentWeatherStyles\";import dateBuilder from\"./DateBuilder\";import React,{useState,useEffect}from\"react\";import{API_KEY,API_BASE_URL}from\"../apis/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CurrentWeather(_ref){var _weather$main;var weatherDetails=_ref.weatherDetails,setWeatherDetails=_ref.setWeatherDetails;var _useState=useState(),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),weather=_useState10[0],setWeather=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),weatherActive=_useState12[0],setWeatherActive=_useState12[1];var handleSearch=function handleSearch(evt){if(evt.key!==\"Enter\")return;setQuery(input);};// useEffect(() => {\n//   if (!query) return;\n//   fetch(`${API_BASE_URL}weather?q=${query}&units=metric&APPID=${API_KEY}`)\n//     .then((res) => res.json())\n//     .then((result) => {\n//       setWeather(result);\n//       setWeatherActive(true);\n//     })\n//     .catch((error) => console.log(error));\n//     if (query.status !== 200 ) {\n//       setError(true)\n//       setErrorMessage(`${query.status} ERROR: City: ${query} ${query.statusText}`)\n//       console.log('ERROR', errorMessage)\n//       return\n//     }\n// }, [query]);\n//ASYNC\n//\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,errorCode,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(API_BASE_URL,\"weather?q=\").concat(query,\"&units=metric&APPID=\").concat(API_KEY));case 3:response=_context.sent;if(!(response.status===404)){_context.next=9;break;}errorCode=\"City: \".concat(query,\" \").concat(response.statusText);setError(true);setErrorMessage(errorCode);// console.log(\"ERROR\", errorCode);\nreturn _context.abrupt(\"return\");case 9:_context.next=11;return response.json();case 11:data=_context.sent;setWeather(data);setError(false);setWeatherActive(true);_context.next=19;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();if(query)fetchData();},[query]);useEffect(function(){if(!weatherActive)return;var getWeeklyWeather=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var lat,lon,response,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:lat=weather.coord.lat;lon=weather.coord.lon;_context2.prev=2;_context2.next=5;return fetch(\"\".concat(API_BASE_URL,\"onecall?lat=\").concat(lat,\"&lon=\").concat(lon,\"&exclude=\",\"minutely,hourly,alerts\",\"&appid=\").concat(API_KEY));case 5:response=_context2.sent;_context2.next=8;return response.json();case 8:result=_context2.sent;setWeatherDetails(result);setWeatherActive(false);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[2,13]]);}));return function getWeeklyWeather(){return _ref3.apply(this,arguments);};}();getWeeklyWeather();},[weatherActive]);return/*#__PURE__*/_jsx(CurrentWeatherStyles,{children:/*#__PURE__*/_jsxs(\"div\",{className:(weather===null||weather===void 0?void 0:(_weather$main=weather.main)===null||_weather$main===void 0?void 0:_weather$main.temp)>16?\"weather_container warm\":\"weather_container\"// typeof weather.main != \"undefined\"\n//   ? weather.main.temp > 16\n//     ? \"weather_container warm\"\n//     : \"weather_container\"\n//   : \"weather_container\"\n,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search_bar\",placeholder:\"Search...\",onChange:function onChange(e){return setInput(e.target.value);},value:input,onKeyPress:handleSearch}),error?/*#__PURE__*/_jsx(\"div\",{className:\"error_message\",children:errorMessage}):/*#__PURE__*/_jsx(React.Fragment,{children:typeof weather.main!=\"undefined\"?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location_box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location\",children:[weather.name,\", \",weather.sys.country]}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:dateBuilder(new Date())})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather_box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"temp\",children:[Math.round(weather.main.temp),\"\\xB0c\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"temp_min\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Min temp: \"}),Math.round(weather.main.temp_min),\"\\xB0c\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"temp_max\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Max temp: \"}),Math.round(weather.main.temp_max),\"\\xB0c\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"humidity\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Humidity: \"}),weather.main.humidity,\"%\"]}),/*#__PURE__*/_jsx(\"img\",{src:\"https://openweathermap.org/img/wn/\".concat(weather.weather[0].icon,\"@2x.png\"),alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"weather\",children:weather.weather[0].main})]})]}):\"\"})]})});}","map":{"version":3,"sources":["/Users/zico/Documents/wheather app/weather-app-web-ZicoRazzi/src/components/CurrentWeather.js"],"names":["CurrentWeatherStyles","dateBuilder","React","useState","useEffect","API_KEY","API_BASE_URL","CurrentWeather","weatherDetails","setWeatherDetails","query","setQuery","input","setInput","error","setError","errorMessage","setErrorMessage","weather","setWeather","weatherActive","setWeatherActive","handleSearch","evt","key","fetchData","fetch","response","status","errorCode","statusText","json","data","getWeeklyWeather","lat","coord","lon","result","console","log","main","temp","e","target","value","name","sys","country","Date","Math","round","temp_min","temp_max","humidity","icon"],"mappings":"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","sourcesContent":["import CurrentWeatherStyles from \"./CurrentWeatherStyles\";\nimport dateBuilder from \"./DateBuilder\";\nimport React, { useState, useEffect } from \"react\";\nimport { API_KEY, API_BASE_URL } from \"../apis/config\";\n\nexport default function CurrentWeather({ weatherDetails, setWeatherDetails }) {\n  const [query, setQuery] = useState();\n  const [input, setInput] = useState(\"\");\n\n  const [error, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const [weather, setWeather] = useState({});\n  const [weatherActive, setWeatherActive] = useState(false);\n\n  const handleSearch = (evt) => {\n    if (evt.key !== \"Enter\") return;\n    setQuery(input);\n  };\n\n  // useEffect(() => {\n  //   if (!query) return;\n\n  //   fetch(`${API_BASE_URL}weather?q=${query}&units=metric&APPID=${API_KEY}`)\n  //     .then((res) => res.json())\n  //     .then((result) => {\n  //       setWeather(result);\n  //       setWeatherActive(true);\n  //     })\n  //     .catch((error) => console.log(error));\n\n  //     if (query.status !== 200 ) {\n  //       setError(true)\n  //       setErrorMessage(`${query.status} ERROR: City: ${query} ${query.statusText}`)\n  //       console.log('ERROR', errorMessage)\n  //       return\n  //     }\n  // }, [query]);\n\n  //ASYNC\n  //\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(\n          `${API_BASE_URL}weather?q=${query}&units=metric&APPID=${API_KEY}`\n        );\n        // console.log(\"RESPONSE DATA\", response);\n\n        if (response.status === 404) {\n          const errorCode = `City: ${query} ${response.statusText}`;\n          setError(true);\n          setErrorMessage(errorCode);\n          // console.log(\"ERROR\", errorCode);\n          return;\n        }\n\n        const data = await response.json();\n        \n        setWeather(data);\n        setError(false)\n        setWeatherActive(true);\n      } catch (error) {}\n    };\n    if (query) fetchData();\n  }, [query]);\n\n  useEffect(() => {\n    if (!weatherActive) return;\n\n    const getWeeklyWeather = async () => {\n      const lat = weather.coord.lat;\n      const lon = weather.coord.lon;\n\n      try {\n        const response = await fetch(\n          `${API_BASE_URL}onecall?lat=${lat}&lon=${lon}&exclude=${`minutely,hourly,alerts`}&appid=${API_KEY}`\n        );\n        const result = await response.json();\n        setWeatherDetails(result);\n        setWeatherActive(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    getWeeklyWeather();\n  }, [weatherActive]);\n\n  return (\n    <CurrentWeatherStyles>\n      <div\n        className={\n          weather?.main?.temp > 16 ? \"weather_container warm\" : \"weather_container\"\n          // typeof weather.main != \"undefined\"\n          //   ? weather.main.temp > 16\n          //     ? \"weather_container warm\"\n          //     : \"weather_container\"\n          //   : \"weather_container\"\n        }\n      >\n        <input\n          type=\"text\"\n          className=\"search_bar\"\n          placeholder=\"Search...\"\n          onChange={(e) => setInput(e.target.value)}\n          value={input}\n          onKeyPress={handleSearch}\n        />\n        {error ? (\n          <div className=\"error_message\">{errorMessage}</div>\n        ) : (\n          <React.Fragment>\n          \n            {typeof weather.main != \"undefined\" ? (\n              <div>\n                <div className=\"location_box\">\n                  <div className=\"location\">\n                    {weather.name}, {weather.sys.country}\n                  </div>\n                  <div className=\"date\">{dateBuilder(new Date())}</div>\n                </div>\n                <div className=\"weather_box\">\n                  <div className=\"temp\">{Math.round(weather.main.temp)}°c</div>\n                  <div className=\"temp_min\">\n                    <span>Min temp: </span>\n                    {Math.round(weather.main.temp_min)}°c\n                  </div>\n                  <div className=\"temp_max\">\n                    <span>Max temp: </span>\n                    {Math.round(weather.main.temp_max)}°c\n                  </div>\n                  <div className=\"humidity\">\n                    <span>Humidity: </span>\n                    {weather.main.humidity}%\n                  </div>\n                  <img\n                    src={`https://openweathermap.org/img/wn/${weather.weather[0].icon}@2x.png`}\n                    alt=\"\"\n                  />\n                  <div className=\"weather\">{weather.weather[0].main}</div>\n                </div>\n              </div>\n            ) : (\n              \"\"\n            )}\n            \n          </React.Fragment>\n        )}\n      </div>\n    </CurrentWeatherStyles>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}